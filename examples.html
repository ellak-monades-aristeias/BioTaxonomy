<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="wikipedia.js"></script>
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.0/css/bootstrap-combined.min.css" />

</head>
<body>
<h3>Members of the Felis genus</h3> 
<p id="genus">  

</p>
<h3>Summary of cat</h3> 
 <div class="results" >
 

      <div class="summary well" >
        <img src="" class="thumbnail"   />
        <h4>
          <span class="title"></span>
        </h4>
        <p>
          Type: <span class="type"></span>
          <br />
        
        </p>
        <p class="summary"></p>
        <div class="clear"></div>

       
      </div>

  

      <div id="raw" class="data-summary" style="display: none;">
        <h3>
          RDF Summary
          (<span class="count"></span> properties found)
        </h3>
        <pre class="properties"></pre>

        <h4>Raw JSON</h4>
        <textarea class="results-json"></textarea>
      </div>

    </div>
</body>
<script type="text/javascript">
    var url = "http://dbpedia.org/sparql";
    var query = "PREFIX db: <http://dbpedia.org/resource/> SELECT ?name WHERE { ?name  dbp:genus \"Felis\"@en .FILTER (?name!=dbr:Felis)}";
    var queryUrl = encodeURI( url+"?query="+query+"&format=json" );
    $.ajax({
        dataType: "jsonp",  
        url: queryUrl,
        success: function( _data ) {
            var results = _data.results.bindings;
            for ( var i in results ) {
                var src = results[i].name.value;
                var value = src.substring(src.lastIndexOf('/') + 1);
                value = value.replace(/\_/g, ' ');
                $("#genus").append(value+"</br>")  ;
           
            }
            
            
        }
    });
    
jQuery(function() {
  
 // if (q.url) {

    var display = function(info) {
      
    

      rawData = info.raw;
      console.log(rawData);
      var summaryInfo = info.summary;
      var properties = rawData[info.dbpediaUrl];

      for (key in summaryInfo) {
        $('.summary .' + key).text(summaryInfo[key]);
      }
      $('.summary .thumbnail').attr('src', summaryInfo.image);
      var dataAsJson = JSON.stringify(summaryInfo, null, '    ')
      $('.summary .raw').val(dataAsJson);
      console.log(dataAsJson);
      // Raw Data Summary
      var count = 0;
      for (key in properties) {
        count += 1;
        $('.data-summary .properties').append(key + '\n');
      }
      $('.data-summary .count').text(count);

      // raw JSON
      var dataAsJson = JSON.stringify(rawData, null, '    ')
      
      $('.results-json').val(dataAsJson);

      $('html,body').animate({
        scrollTop: $('#demo').offset().top
        },
        'slow'
      );
    };
    
   
    WIKIPEDIA.getData('http://en.wikipedia.org/wiki/Cat', display, function(error) {
        alert(error);
      }
    );
 // }


});
</script>
</html>